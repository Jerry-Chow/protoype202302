<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>カレンダーの設定</title>
    <link rel="stylesheet" href="css/base.css">
    <script src="js/jquery-3.6.3.min.js"></script>
    <link rel="stylesheet" href="css/input.css">
    <script src="js/jquery.cookie-1.4.1.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/messages_ja.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
</head>
<body>
<div id="userContainer">
    <h2>カレンダーの設定</h2>
    <div class="marginGap">
            <span>
                日時を入力し「確認」をクリックしてください。
            </span>
    </div>
    <div>
        変更中止する場合は、「中止」をクリックしてください。
    </div>

</div>
<div style="width:650px;margin-left: auto;margin-right: auto;margin-top: 20px">
    <form action="/device/setTime">
    <div class="marginGap">
        <label for="date">
            日付
        </label>
        <input id="date" name="date" type="date" class="marginLeft" style="width:143px" required>

    </div>
    <div class="marginGap">
        <label for="time">
            時刻
        </label>
        <input id="time" name="time" type="time" class="marginLeft" style="width:143px" required>
    </div>
    <div class="marginGap">
        <label>
            NTP
        </label>
        <div  style="display:inline-block;">
            <input id="card" type="radio" name="ntpOn" value="0">
            <label for="card" class="radioLabel">
                無効
            </label>
        </div>
        <div  style="display:inline-block;">
            <input id="card2" name="ntpOn"  type="radio" value="1" >
            <label for="card2" class="radioLabel">
                有効
            </label>
        </div>
        <!--<input id="ntp" name="ntp" type="text" class="marginLeft" required>-->
    </div>
    <div class="marginGap hide">
        <label for="ntp">
            NTPアドレス
        </label>
        <input id="ntp" name="ntp" type="text" class="marginLeft" required>
    </div>
    <div class="userSetDiv" style="margin-top: 70px;">
        <input type="submit" class="userSetBtn" style="margin-right: 250px" value="確定" >
        <input id="stop" type="button" class="userSetBtn" value="中止" >
    </div>
    </form>
</div>
</body>
<script src="js/load.js"></script>
<script>
    $(".hide").hide();
    $("input[type='radio']").change(function () {
        if($(":checked").val()==0){
            $(".hide").hide();
        }else {
            $(".hide").show();
        }
    })

    function checkWithOnOff(value,pattern) {
        let $ctr = $(":checked");
        if ($ctr && $ctr.val() == "1"){
            return !!value /*&& pattern.test(value)*/;
        }
        return true;
    }

    jQuery.validator.addMethod("checkWithOnOff",function (value,element,pattern) {
        return this.optional(element) == true || checkWithOnOff(value,pattern);
    })

    $(function () {
        $("form").validate({
            rules: {
                serverPort:{
                    required: true,
                    pattern:/^\d{1,5}$/
                }
                // ntp:{
                //     checkWithOnOff:/\w/
                // }
            },
            messages: {
                serverPort:{
                    pattern: "数字で正しく入力してください。"
                }
                /*ntp:{
                    checkWithOnOff:"ファイルドは必須です。"
                }*/
            },
            submitHandler: function (){
                ajaxSubmit();
                // alert("OK");
            }
        });
    })
</script>
</html>