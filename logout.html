<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ログアウト</title>
    <script src="js/jquery-3.6.3.min.js"></script>
    <script src="js/jquery.cookie-1.4.1.min.js"></script>
    <link rel="stylesheet" href="css/base.css">
</head>
<body>
<form action="/device/reboot">
    <div id="loginContainer">
        <h2>ログアウト</h2>
        <div class="marginGap">
            <span>
                設定変更した場合はリブートしてください。
            </span>
        </div>
        <form action="/device/reboot">

        <div class="loginContainer" style="margin-top: 70px;">
            <input type="button" value="リブート" class="text-center">
        </div>
        </form>
    </div>
</form>
</body>
<script>
    $(":button").click(function() {
        $.removeCookie("loginState");

        var $form = $("form");
        var actionUrl = $form.attr('action');
        // var actionUrl = "https://eopz8ly41cg8q6s.m.pipedream.net";
        // let data = $form.serialize();
        // let data = $form.serialize();
        let data = '';

        $.ajax({
            type: "POST",
            url: actionUrl + '?' + $.param(data),
            // data: $form.serialize(), // serializes the form's elements.
            dataType: "json",
            data: {
                data: data
            }, // serializes the form's elements.
            success: function (data) {
                if (data && !data.ret && !isNaN(data.ret)) {
                    alert("リブートしています、少々お待ちください。");
                    // alert("送信に成功しました。設定が完了したら、デバイスを再起動してください。"); // show response from the php script.
                } else {
                    alert("送信に失敗しました。" + data.msg);
                }
            },
            error: function (data) {
                alert("送信に失敗しました。" + data.msg);
            }
        });

        // alert("リブートしています、少々お待ちください。");
    })
</script>
</html>